<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="text-center">Connexion</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="flex items-center justify-center bg-gray-100">
  <div class="w-full max-w-md bg-white shadow-md rounded-lg p-6">
    <h1 class="text-2xl font-bold text-center mb-6">Bienvenue</h1>
    
    <!-- Message d'erreur global -->
    <div *ngIf="errorMessage" class="text-red-500 text-center mb-4">
      {{ errorMessage }}
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onLogin()" class="space-y-4">
      <!-- Email Field -->
      <ion-item class="bg-gray-100 rounded-md" [class.invalid]="email?.invalid && email?.touched">
        <ion-label position="floating" class="text-gray-500">Email</ion-label>
        <ion-input type="email" formControlName="email"></ion-input>
      </ion-item>
      <!-- Message d'erreur pour Email -->
      <p *ngIf="email?.invalid && email?.touched" class="text-sm text-red-500">
        <span *ngIf="email?.errors?.['required']">L'email est requis.</span>
        <span *ngIf="email?.errors?.['email']">Entrez un email valide.</span>
      </p>

      <!-- Password Field -->
      <ion-item class="bg-gray-100 rounded-md" [class.invalid]="password?.invalid && password?.touched">
        <ion-label position="floating" class="text-gray-500">Mot de passe</ion-label>
        <ion-input type="password" formControlName="password"></ion-input>
      </ion-item>
      <!-- Message d'erreur pour Password -->
      <p *ngIf="password?.invalid && password?.touched" class="text-sm text-red-500">
        Le mot de passe est requis.
      </p>

      <!-- Login Button -->
      <div class="text-center">
        <ion-button
          expand="block"
          type="submit"
          [disabled]="loginForm.invalid || isLoading"
          class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md"
        >
          <!-- Spinner pendant le chargement -->
          <ion-spinner *ngIf="isLoading" slot="start"></ion-spinner>
          Se connecter
        </ion-button>
      </div>

      <!-- Register Link -->
      <div class="text-center mt-4">
        <p class="text-sm text-gray-500">
          <a routerLink="/forgot-password" class="text-blue-500 font-medium">Mot de passe oubli√© ?</a>
        </p>
        <p class="text-sm text-gray-500 mt-2">
          Pas encore de compte ? <a routerLink="/register" class="text-blue-500 font-medium">S'inscrire</a>
        </p>
      </div>
    </form>
  </div>
</ion-content>
